{% extends 'base.html.twig' %}

{% block content %}
<div class="container mt-4">
    <h1>Cron Jobs</h1>

    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}

    {% for message in app.flashes('error') %}
        <div class="alert alert-danger">
            {{ message }}
        </div>
    {% endfor %}

    <h2 class="mt-4">Current Cron Jobs</h2>
    <ul class="list-group">
        {% for cronJob in cronJobs %}
            {% if cronJob %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ cronJob }}
                    <form action="{{ path('cron_remove') }}" method="POST" style="display:inline;">
                        <input type="hidden" name="cronJob" value="{{ cronJob }}">
                        <button type="submit" class="btn btn-danger btn-sm">Remove</button>
                    </form>
                </li>
            {% endif %}
        {% endfor %}
    </ul>

    <h2 class="mt-4">Add New Cron Job</h2>
    <form action="" method="POST">
        <div class="form-group">
            <label for="minute">Minute</label>
            <input type="text" id="minute" name="minute" class="form-control" placeholder="0-59" maxlength="2">
        </div>
        <div class="form-group mt-2">
            <label for="hour">Hour</label>
            <input type="text" id="hour" name="hour" class="form-control" placeholder="0-23" maxlength="2">
        </div>
        <div class="form-group mt-2">
            <label for="day">Day of Month</label>
            <input type="text" id="day" name="day" class="form-control" placeholder="1-31" maxlength="2">
        </div>
        <div class="form-group mt-2">
            <label for="month">Month</label>
            <input type="text" id="month" name="month" class="form-control" placeholder="1-12" maxlength="2">
        </div>
        <div class="form-group mt-2">
            <label for="weekday">Day of Week</label>
            <input type="text" id="weekday" name="weekday" class="form-control" placeholder="0-6 (0 = Sunday)" maxlength="1">
        </div>
        <div class="form-group mt-2">
            <label for="command">Command</label>
            <input type="text" id="command" name="command" class="form-control" placeholder="/path/to/command.sh">
        </div>
        <button type="submit" class="btn btn-primary mt-3">Add Cron Job</button>
    </form>
</div>
{% endblock %}
